04/08/2020:
Azure Account Details:
Cherukula.Reddy@hanuglobal.hanu.com

Cloud cost
1. Pay as you go
2. 24/7
3. Afront cost

Cloud are three types
1. Public
2. Private 
3. Hybrid cloud 

Public vs Private datacenter
Priate datacenter has a seperate layer for communication with the public cloud.
Backend tools like SCmvmm, orchestrator script where details of required tools and ram, storage is given.
Using that script we can call the VM in Privatecloud from Public cloud.

Region 33 regions. Trying to have 3zone for each region. 


Subscriptions
Non Prod
1. Free Trail
2. Azure Pass $100 1month
3. MSDN $ 150

Prod
1. Pay as you go
2. Reseller - Partner -Some Discount
3. Enterprise  -IBM  Hanu -- Huge Discount

Role Based Concept
1. Owner --- Full Permission
2. Contributor --- Can Manage all the resources. But can't give permission to anyone
3. Reader --- Read only
Job Role Permission
4. VM-Contributor --- manage only Vms
5. Network Contibutor --- manage only Network
so on ....... 100+ permissions

Target Object
1. Subscription 
2. Resource Group/Folder Level (Resource group related items)
3. Resource level (Specific resource item like VM)

ncpa.cpl in RUN command

LAB-1- CREATE VNET -
1. PORTAL > CREATE > NETWORKING > VNET > VNET NAME-  AZ-VNET > ADDRESS SPACE- 10.0.0.0/16
2. SELECTE EXISITING RESOURCE GROUP - MAKE SURE YOU ARE USING EAST US AS A REGION .
3. SUBNET - NAME - SUBNET1-WEB - RANGE - 10.0.0.0/24 > CREATE .

LAB-2- ADD ADDITIONAL SUBNET INTO EXISTING VNET 

PORTAL > NETWORKS > CLICK VNET > SUBNETS > + ADD SUBNET  > NAME - SUBNET2-SQL>
RANGE - 10.0.1.0/24 > CLICK OK . 
VERIFY VNET - IT SHOULD SHOW TWO SUBNETS.

LAB NO 3- = CREATE ONE VM ON SUBNET1

CREATE > COMPUTE> MARKETPLACE- Windows Server 2012 R2 Datacenter> CREATE >
> BASIC> SELECT EXISTING RESOURCE GROUP > VM NAME- SUBNET1-VM1- SIZE DSV1- DEFAULT
>USERNAME - KUMAR > PASSWORD - 123@azure123@AZURE  > INBOUND PORT RULES ADD>
Allow selected ports< ADD RDP CHECK BOX > 
DISK> NEXT> NO CHANGES
NETWORK> MAKE SURE EXISTING VNET IS AVAILABLE  AND SELECT SUBNET 1 >
MANAGEMENT > AUTO SHUTDOWN > ON > 7 PM > UST : 5:30 
Guest config> NEXT>
TAGGING > NEXT
FINAL CREATE .  

LAB NO 4- = CREATE ONE VM ON SUBNET2

CREATE > COMPUTE> MARKETPLACE- Windows Server 2012 R2 Datacenter> CREATE >
> BASIC> SELECT EXISTING RESOURCE GROUP > VM NAME- SUBNET2-VM1- SIZE DSV1- DEFAULT
>USERNAME - KUMAR > PASSWORD - 123@azure123@AZURE  > INBOUND PORT RULES ADD>
Allow selected ports< ADD RDP CHECK BOX > 
DISK> NEXT> NO CHANGES
NETWORK> MAKE SURE EXISTING VNET IS AVAILABLE  AND SELECT SUBNET 2 >
MANAGEMENT > AUTO SHUTDOWN > ON > 7 PM > UST : 5:30 
Guest config> NEXT>
TAGGING > NEXT
FINAL CREATE .

LAB-5 CHANGE STATIC IP ADDRESS TO VM 

CLICK EXISTING VM > NETWORKING > CLICK Network Interface- NAME-SUBNE1-VM1999 > IPCONFIGURATION> >IPCONFIG1>
>CLICK STATIC> CLICK SAVE .
THIS WAY SAME IP CAN BE ASSIGNED AS STATIC .

LAB-6 - CONNECT ANY AZURE VM VIA PUBLIC IP

PORTAL> VM > COPY THE PUBLIC IP - 
> RUN> MSTSC > PASTE IP > TRY TO CONNECT .


**********************************************************************************************************************************************

05/08/2020
NSG
Inbound, outbound, Rules, Priority, Default Rules
NSG can be attached at 1. Subnet level 2. VM Level
Only at one level we can attach the same NSG.
DefaultInbound rules:
1.Allow Load Balancer
2.Allow Vnet INBOUND
3.Deny all

DefaultOutbound
1.Allow


NSG STEP BY STEPS

STEPS - BEFORE DO THIS LAB , MAKE SURE ONE VNET WITH TWO SUBNETS SHOULD BE CREATED AND EACH SUBNET THERE SHOULD BE ONE VM .
EAMPLE- SUBNET1-VM - IP 10.0.0.4 AND SUBNET2-VM2- IP 10.0.1.4
IMPORTANT- CREATE TWO NSG NAMED PROD-NSG1 AND PROD-NSG2 AND ATTACH PROD-NSG1 INTO SUBNET 1 AND PROD-NSG2 INTO SUBNET 2

**********************
1. CREATE > SEARCH - NETWORK SECURITY GROUP > NAME - PROD-SUBNET1 > SELECT RESOURCE GROUP >OK .
2. CREATE > SEARCH - NETWORK SECURITY GROUP > NAME - PROD-SUBNET2 > SELECT RESOURCE GROUP >OK .
3. CLICK RESOURCE GROUP> VNETS> SUBNETS> CLICK SUBNET1> NSG > SELECT PROD-NSG1>OK.
4. CLICK RESOURCE GROUP> VNETS> SUBNETS> CLICK SUBNET2> NSG > SELECT PROD-NSG2>OK.
LAB-A1- SCENERIOS FOR SUBNET-1-WEB SERVER- VM-10.0.0.4
TASK-A. RDP VIA PUBLIC IP SHOULD BE ALLOWED.
ANS- PROD-NSG1 IS BLOCKING RDP PORT  . CREATE BASIC RULE TO ALLOW RDP .
SOLUTIONS OR  STEPS- CLICK PROD-NSG1> INBOUND > ADD - SELECT BASIC > SELECT RDP > ALLOW > SAVE.
TASK-B. INTERNET SHOULD BE ALLOWED.
ANS- BY DEFAULT INTERNET RULE IS ALWAYS ALLOWED SO NO ACTION IS REQUIRED .
TASK-C. REST ALL SHOULD BE DENIED.
ANS - YES BY DEFAULT REST ALL PORTS ARE BLOCKED SO NO ACTION IS REQUIRED 
LAB-B1- SCENERIOS FOR SUBNET-2-SQL- DB-VM2- 10.0.1.4
TASK-A. RDP VIA PUBLIC IP SHOULD NOT BE ALLOWED.
ANS - BY DEFAULT PROD-NSG2 IS ALREADY BLOCKING VIA DEFAULT DENY ALL RULE . NO ACTION IS REQUIRED.
TASK-B. RDP FROM  SUBNET-1 VM TO  SUBNET-2 VMS VIA LOCAL IP OR PRIVATE SHOULD BE ALLOWED.
BY DEFAULT INTERNALLY THIS IS ALLOWED BECAUSE OF VNET INTERNAL RULE .
TASK-C. INTERNET BLOCKED. 
ANS - BY DEFAULT INTERNET ALWAYS ALLOWED SO WE NEED TO CREATE INTERNET BLOCK RULE UNDER PROD-NSG2 .
SOLUTIONS - CLICK PROD-NSG2- OUTBOUND> ADD RULE > SELECT ADVANCE> SOURCE ANY , SOURCE PORT * ,
DESTINATION ANY , DESTINATION PORT 80,443 > SELECT DENY > SAVE .
TESTING - TRY TO TAKE RDP TO SUBNET1VM1 VIA PUBLIC IP  AND FROM THI RDP > TRY TO TAKE
RDP OF 10.0.1.4 ( PRIVATE IP OF SUBNET2-VM - RDP INTO RDP ) AND TRY TO CHECK INTERNET .
INTERNET SHOULD BE BLOCKED AT THIS STAGE BECAUSE JUST NOW YOU CREATED INTERNET BLOCK RULE  UNDER TASK-C

Types Network Connections
Site-site: On permises to Cloud using VPN tunnel local network gateway
Point-site: Remotepc to azure cloud using gateway (gateway subnet) virtual networkgateway
Vnet-Vnet: To connect two networks on azure. two cloud networks
Vnet- peering : Azure network different regions and same region 

** Point to Site for next configuration we need only client cert and Script.


*****************************************************************************************************************************************************************

06/08/2020
VNET PEERING: Same subscription. If not same root then move to same same subscription.
Site to Site: requirements for site to site are: On premisis gateway public ip or router ip and ip ranges. Azure gateway public ip or router ip and ip ranges
local network gateway is needed. and name it. It needs PIP of On Premises
public ip (IP Address) Range (Address Space)

51.104.216.216      172.16.0.4
52.186.142.130      10.0.0.4

VNET PEERING - BETWEEN TWO REGIONS IN SAME SUBSCRIPTIONS
* BEFORE DO THIS LAB MAKE SURE  WE SHOULD HAVE TWO VNETS IN DIFFERENT REGIONS AND EACH
REGIONS WE SHOULD HAVE MINIMUM ONE VM .

EXAMPLE - EAST US - VM1-IP - 10.0.0.4
EXAMPLE - WEST US - VM2-IP - 172.16.0.4

TURN OFF THE WINDOWS FIREWALL ON BOTH THE MACHINES
STEPS -
1. RG > EAST US VNET > PEERING > NAME - EASTUSTO WEST > SELECT WESTUS VNET>
DEFINE NAME - WESTUSTOEAST >OK .
2. RG > WESTUS VNET > PEERING -BY DEFAULT IT WILL SHOW AUTOMATICALLY .
3. TRY TO TAKE RDP FROM EASTUS TO WEST US VM OR TRY TO PING FROM EAST TO WEST US VM 
EAST US VM --- PING 172.16.0.4 --- .
4. BOTH SIDE IT WILL PING AND SHOW CONNECTIVITY

SERVICE ENDPOINT: Any machine want to talk with Paas service using VNET is called Service Endpoint.
Service Tags: In NSG to block specific service we can use service tags.

DNS HOST
STEP BY STEP AZURE DNS
1. PURCHASE ONE PUBLIC DOMAIN- EXAMPLE ABC.COM FROM GODADDY or FreeNOM.COM
2. CREATE AZURE VM AND CREATE SMALL SAMPLE APPLICATION. 
A. ADD ROLES> INSTALL WEB SERVER> NEXT > FINISH .
B. OPEN NOTEPAD > TYPE HELLO AZURE . WEB1 > CLICK FILE SAVE AS > C:\INTEPUB\WWWROOT
>Default.htm> save > ok
****Warning - Default.htm name is case sensitive and keep same name only.
C. IE> Http://web1 ( WEB1 means AZURE machine name ) > make sure web page is opening .
CMD - HOSTNAME  - TO CHECK MACHINE NAME  .
3. AZURE PORTAL > CREATE DNS ZONE > NAME - ABC.COM ( WHAT EVER DOMAIN NAME YOU PURCHASE
YOU HAVE TO USE SAME NAME ) > CREATE .
4. AZURE DNS- COPY ALL NS ONE BY ONE - ABC.COM > COPY ALL NAME SERVES - THERE ARE 4 IN AZURE DNS
EG- ns1-01.azure-dns.cOM .
AND UPDATE TO GODADDY OR WHERE EVER YOU PURCHASE SO THAT YOU CAN UPDATE GO DADDY , THAT FROM
TODAY ONWARDS I WILL USE AZURE DNS NS SERVICE *****************
EXAMPLE > FREENOM > SELECT DOMAIN > MANAGEMENT TOOLS > USE THIS NAME SERVER
> COPY PASTE AZURE NS SERVER ONE BY ONE - OVER ALL THERE ARE 4 NS SERVER > SAVE .
5. AZURE DNS - ABC.COM > ADD A RECORD - TYPE WWW >>>> IP ADDRESS ( AZURE VM PUBLIC IP - 66.10.10.10 )
6. END RESULT IS WHEN YOU BROWSE WWW.ABC.COM - WEB PAGE WILL BE ACCESSABLE FROM INTERNET
VIA USSING AZURE DNS FEATURE BECAUSE YOU DONE THIS A RECORD ENTRY INTO AZURE DNS PUBLIC
DNS SERVICE INSTEAD OF GODADDY DEFAULT .
**** ALLOW HTTP VIA BASIC RULE  ---- NSG1 AND SUBNET1- VM LEVEL FIREWALL . 

******************************************************************************************************************************************************

07/08/2020
VM MANAGEMENT
1. Basic Tier A0-A4 No SLA (service )
2. Standard Tier A1-A4, B1-B10, D1-D10, E,F,G  SLA
Mostly in Prod we start using from B1

Avalibilityset
01. CREATE RESOURCE GROUP 
2. CREATE VNET - 10.0.0.0/16 - SUBNET 1 - 10.0.0.0/24
3. CREATE VM > VM NAME- WEB1- MAKE SURE YOU SELECT AVA-SET - CREATE NEW > NAME - AVA-SET-WEB
>* --- Make sure you allow HTTP + RDP Check Boxes while creating VMS .
Q-1 FAULT DOMAIN - SELECT 3
Q-2 UPDATE DOMAIN - SELECT 5.
4. WAIT FOR VM CREATION .
5. CLICK RG > AVA-SET >  WEB 1 IS AVAILABLE - PLS CHECK 0 0  TAGGING .
FAULT DOMAIN --- 0    & UPDATE DOMAIN --- 0 .
STEP NO 5 IS ONLY FOR VERIFICATION PURPOSE.*******************
6. CREATE NEW VM - NAME WEB2 - MAKE SURE YOU SELECT EXISTING AVA-SET ( SELECT
AVA-SET CREATED IN STEP 3  > FINISH .
7. VERIFY AVA-SET - TWO VMS ARE AVAILABLE - TAGGING 0 0  AND 1 1 **********************

8. LOGIN WEB1- SERVER MANAGER >ADD ROLES > INSTALL > WEB SERVER ROLE> CLICK ADD FEATURE> NEXT NEXT FINISH .***************
9. OPEN NOTEPAD > TYPE HELLO AZURE . WEB1 > CLICK FILE SAVE AS > C:\INTEPUB\WWWROOT
>Default.htm> save > ok
****Warning - Default.htm name is case sensitive and keep same name only*****
10. IE> Http://web1 ( WEB1 means machine name ) > make sure web page is opening .
**********To View machine name> RUN CMD ---Type - COMMAND-  HOSTNAME.************
11. LOGIN WEB2- SERVER MANAGER >ADD ROLED > INSTALL WEB SERVER ROLE> NEXT NEXT FINISH .
12. OPEN NOTEPAD > TYPE HELLO AZURE . WEB2> CLICK FILE SAVE AS > C:\INTEPUB\WWWROOT
>Default.htm> save > ok
13. IE> Http://web1 ( WEB2 means machine name ) > make sure web page is opening .
****Warning - Default.htm name is case sensitive and keep same name only.

14. LOAD BALANCER AZURE -  
CREATE > NETWORK > AZURE LOAD BALANCER >NAME- WEB-LB >
> SELECT PUBLIC
> SELECT BASIC 
> PUBLIC IP - CREATE NEW-  NAME - WEB-LB-PIP
> ALWAYS STATIC 
> REVIEW AND CREATE
16. VERIFY STEP WHETHER WE GOT LB PUBLIC IP OR NOT 
LOAD BALANCER> NAME - WEBNLB> FRONT END - VERIFY THIS IS PIP > PUBLIC IP SHOULD BE VISIBLE TO YOU . 
LOAD BALANCER > BACK END POOL>
> NAME- WEB SERVER
> VIRTUAL NETWORK - SELECT YOUR VNET
> ASSOCIATED TO SELECT VM - ADD- SELECT WEB1 AND WEB2 - AND ADD .
***MAKE SURE BOTH THE VMS ARE VISIBLE UNDER BACK END****************
17. HEALTH PROBE > JUST GIVE RULE NAME -ADD RULE 1 > DEFAULT  ( TOTAL 15 SEC - 5*3 = 15 SECS )
18. LOAD BALACNING RULES > ADD > RULE NAME > RULE 1 > FRONT END > BACK END DEFAULT - PORT 80 > OK .***
WEBNLB-PIP (40.114.24.102)- 
OPEN CHROME > OPEN PRIVATE WINDOW > HTTP://PUBLICIP OF NLB - CLOSE COUPLE OF TIMES OR USE MOBILE OR USE DIFFERENT BROWSER .

19 DNS HOST
Goto DNS HOST click on your DNS
Add recors set > name = www , Ip = load balancer IP click ok.


**************************************************************************************************************************************************************

08/08/2020
Azure Directory and Migration

Migration types
1. Data Migration
2. Server Migration

* Azure understand .vhd format.  to convert to vhd we uses tool like disk2vhd

MIGRATE DISK FROM ON PREMISES TO AZURE.

* CREATE ONE STORAGE ACCOUNT
STEPS-  PORTAL> STORAGE> ADD > SELECT RG > NAME - kstg1000 ( small letters are supported in Storage ) > Region> SELECT PREMIUM TYPE> choose default settings > Ok .
Click STORAGE ACCOUNT WHICH U CREATED > CLICK CONTAINER OPTION> + Container> Name - vhds> ok .
EXTRA STEPS-
1. LOGIN INTO AZURE VM > SERVER MANAGE > LOCAL SERVER >RIGHT HAND SIDE
> IE ADVANCE SECURITY > BY DEFAULT THIS IS ON > CLICK > DISABLED FOR BOTH .
2. OPEN IE > GOOGLE.COM> TYPE - DOWNLOAD CHROME > INSTALL CHROME .
3. CHROME- LOGIN > PORTAL.AZURE.COM  from AZURE VM 
STEPS TO MIGRATE ONPREMISES VM DATA DISK TO AZURE
* TRAINER WILL SHARE SAMPLE 100 MB VHD FILE VIA ONE LINK . DOWNLOAD THIS VHD FROM AZURE VM .
1.PORTAL>STORAGE ACCOUNT > CONTAINER > VHDS > CLICK UPLOAD > SELECT DISK 100MB> MAKE SURE
YOU SELECT PAGE BLOB> OK  > WAIT FOR UPLOAD STATUS.
2. VERIFY 100MB DISK INTO VHDS CONTAINER INSIDE STORAGE.
3. PORTAL > CLICK AZURE VM> DISK > ADD > Create NEW DISK > GIVE NAME- SMALL LETTER > SOURCE TYPE STORAGE BLOB > 
SELECT STORAGE>VHDS> SELECT 100MB DISK * > SPACE--- 1GB -OK > SAVE .
4, AZUREVM> CLICK MYPC - PLEASE VERIFY SAME 100MB DISK ALONG WITH ALL DATA .
9. DISKMGMT.MSC> RIGHT CLICK 100MB VOLUME >EXTEND> NEXT NEXT FINISH . 

ACTIVE DIRECTORY
On Premises AD and AZure AD
AZure AD-- is needed if atleast we have one saas application.

ON PREMISES----
Authenticate, Authorise, Access.
TGT-
TGS- Ticket granted Session
Domain Controllers two atleast. for fault tolerance.
sysvol-gpo policies
NTDS.DIT - database file for AD

AZ AD----is needed if atleast we have saas application
objects--users, group.
two types of Azure AD 
1. Standard AD -- Default
2. Premium AD -- Licence per user based.
   uses--- SLA, Company branding, Advance reports, MFA, self password reset, publish over internet without pubip, policies, healthstatus.

Azure AD Connect: Sync service of all on permises user to AZ-AD
first time full sync. next its a Delta sync
Onway sync from on permises to Azure AD.
one app --- go for application AD
Two or more apps -- go for full Azure AD and connect the app to Az AD

AZ AD Connect Scenario:
1. Password-Hash Sync -- 2 authentication AZAD and On permises
2. ADFS- sso -- 1 Authenticate ON PREMISES using ADO
3. Pass-Through
    
LAB2 - CREATE ONE GLOBAL ADMISTRATOR ACCOUTN WHO ACTUALLY MANAGE ENTIRE AZURE AD .
1.  PORTAL > AZURE AD > MAKE SURE YOU ARE USING PRODUCTION DIRECTORY > USERS > NEW USER
> NAME - GLOBAL ADMIN > FULL NAME -  ADMIN@AZ103TK.onmicrosoft.com> FILL PROFILE DETAILS LIKE
FIRST NAME , LAST NAME  >
ROLES > MAKESURE GLOBAL ADMIN IS SELECTED> 
PASSWORD- SHOW PASSWORD - COPY AND PASTE THIS PASSWORD INTO NOTEPAD .
CLICK CREATE .
2. CLICK GLOBAL ADMIN > EDIT SETTING> DEFINE USAGE LOCATION - ANY COUNTRY LIKE USA> SAVE .

** VERIFY ==== CLICK USERS> USERNAME WHICH U CREATED > ASSIGN ROLES> MAKE SURE GLOBAL ADMIN
IS VISIBLE.
LAB 4 - ACTIVATE PREMIUM AD LICENCE AND ASSIGN TO GLOBAL ADMIN .
1.PORTAL > AZURE AD > MAKE SURE YOU ARE USING PRODUCTION DIRECTORY > COMPANY BRANDING> GET FREE TRIAL> SELECT PREMIUM AD P2 LICNECE - ACTIVATE - BY DEFAULT YOU WILL GET 30 DAYS 100 P2 LICENCE.
2. RERESH THE PORTAL - TWICE .
3. LICENCE> CLICK PRODUCT > SELECT P2> + ASSIG > ASSIGH TO GLOBAL ADMIN > OK .
VERIFY -- UNDER PRODUCTS - IT WILL SHOW 99 . IT MEANS ONE IS ASSIGNED OUT OF 100 .
AZURE AD - VALIDATION - PORTAL> AZURE AD - NEAR TO OVERVIEW - PLS VALIDATE THIS IS A PREMIUM AD
 
LAB 5 - Company Branding 
1.PORTAL > AZURE AD > MAKE SURE YOU ARE USING PRODUCTION DIRECTORY > COMPANY BRANDING> Make sure Configure option is visible . If this option is not VISIBLE AND YOU ALREADY P2 PREMIUM LICNECE, PLS REFRESH AZURE PORTAL URL.
2. OPEN NEW CHROME OR BROWSER WINDOW> IMAGES.GOOGLE.COM> SEARCH RHINO > SELECT FIRST PICTURE> RIGHT CLICK
DOWNLOAD IMAGE > ALL FILES > SAVE > RHINO.JPG>OK .
3. COMPANY BRANDING > CONFIGURE > Browse 4 times- with company Logo .
SIGN IN TEXT PAGE- PUT SOME WELCOME MESSAGE - EG - WELCOME TO CLOUD SERVICE .
SHOW OPTION TO SIGN IN - YES > CLICK FINAL SAVE .

LAB 6 - CONFIGURE SELF PASSWORD RESET POLICY SO THAT CLOUD USER CAN CHANGE HIS OWN PASSWORD 
STEPS- PASSWORD RESET > SELF PASSWORD RESET - ENABLE FOR ALL OPTION > SAVE .

LAB 7 - TEST SELF PASSWORD RESET , COMPANY BRANDING ---
1. OPEN PRIVATE WINDOW OR TAKE DIFFERNT BROWER ---URL-  HTTPS://MYAPPS.MICROSOFT.COM -
2. TRY TO LOGIN WITH GLOABL ADMIN-  PROMPT COMES TO RESET THE PASSWORD - 123@azure
3. Wizard prompt comes to validate Your Phone No and Email Address .
4. ANY POINT OF TIME IF YOU FORGOT PASSWORD - CLICK MYAPPS.MICROSOFT.COM > TYPE USER NAME > CLICK FORGOT PASSWORD> VALIDATE WITH SMS CODE AND THEN THIS WILL ALLOW YOU TO RESET YUR PASSWORD DIRECTLY .

1. AZURE AD> USERS> MFA > ENABLE FOR ADMIN > ENABLE
2. LOGIN WITH ADMIN > ENABLE PH NO .
3. SIGN OUT AND SIGN IN ... 	

LAB 8 - CONFIGURE AZURE VM AS DOMAIN CONTROLLOR ( LIKE ON PREMISES DOMAIN CONTROLLOR )
1. AZURE VM ASSIGN STATIC IP -----  AZURE VM > NETWOKING > NIC CARD> IPCONFIG > CLICK IPCONFIG1>
> SELECT STATIC> SAVE .
2. PLEASE VALIDATE IP ADDRESS OF AZURE VM - EXAMPLE - IF IP ADDRESS OF AZURE VM IS 10.0.0.4 THEN
WE NEED TO CONFIGURE SAME 10.0.0.4 AS DNS INSIDE AZURE VM 
3. AZURE VNET> DNS SERVER > SELECT CUSTOM > FIRST- 10.0.0.4 ( BASED ON AZURE VM BECAUSE WE ARE
MAKING AZURE VM 10.0.0.4 AS DNS SERVER )
SECOND-  168.63.129.16 > SAVE .
4.  AZURE VM  - CMD --- IPCONFIG /RENEW  AND THEN TYPE IPCONFIG /ALL ... PLEASE VALIDATE 
IP ADRRES- 10.0.0.4 AND DNS 10.0.0.4 + ALTERNATE 168.63.129.16 .
5. INSTALL ACTIVE DIRECTORY FEATURE ON AZURE VM==
SERVER MANAGER> ADD ROLES> NEXT NEXT NEXT > SELECT ACTIVE DIRECTORY > ADD FEATURES
> NEXT NEXT NEXT > FINISH . PLEASE WAIT FOR AD INSTALLATION .
6.  SERVER MANAGER> PLEASE NOTICE YELLOW TRIANGLE NOTIFICATION IS VISIBLE > CLICK THIS
NOTIFICATION > PROMOTE THIS SERVER TO A DOMAIN CONTOLLOR >  NEW FOREST - KUMART.TK
*********** PLEASE USE CORRECT NAME WHICH U ALREADY REGISTERED AS CUSTOM DOMAIN UNDER
AZURE AD .************************************************
NEXT - password - RECOVERY PASSWORD- 123@AZURE > NEXT NEXT > INSTALL .
7. MACHINE WILL BE REBOOTED AUTOMATICALLY --- LOGIN---- KUMARSOFT.TK\KUMAR ------
8. LOGIN INTO AZURE VM > RUN > TYPE DSA.MSC > RIGHT CLICK DOMAIN NAME
KUMARSOFT.TK > NEW OU > OU NAME - EMPLOYEES > OK .
UNDER EMPLOYEES OU > RIGHT CLICK NEW USER> USERNAME - IT1.. AND PASSWORD 123@AZURE
> SELECT PASSWORD NEVER EXPIRE > OK .
PLEASE CREATE COUPLE OF MORE USERS UNDER SAME OU- EXAMPLE IT2 AND IT3. 

CUSTOM DOMAIN -
STEPS TO ADD CUSTOM DOMAIN TO AZURE AD 
PORTAL > AZURE AD > CUSTOM DOMAIN > ADD - TYPE KSOFT.TK ( WHAT EVER PUBLIC DOMAIN YOU PURCHASED)
> YOU NEED TO CREATE TWO ENTRIES MX & TXT IN PUBLIC DOMAIN DNS . ONCE ENTRIES ARE CREATED.
> FINAL STEP > TO CLICK VERIFY  IN AZURE PORTAL .

  
LAB 9 - HYBRID IDENITY - INTEGRATE ON PREMISES AD WITH AZURE AD VIA AZURE AD CONNECT .
1. LOGIN INTO ON PREMISES AD SERVER > SERVER MANAGER > LOCAL SERVER > IE ADVANCE SECURITY > DISBALED.
2. OPEN IE > GOOGLE.COM > DOWNLOAD AZURE AD CONNECT - DOWNLOAD THIS 90MB TOOL > SAVE > RUN >INSTALL .
3. I ACCEPT THE AGREEMENT> CLICK CUTOMIZED> SQL SERVER OPTION - WE NEED TO DEFINE SQL DB NAME AND SERVER IP * THIS IS MANDATORY IN PRODUCTION.
4. RIGHT NOW WE ARE DOING WITHOUT SQL SERVER - IT WILL INSTALL SQL EXPRESS FREE DB EDITION > RIGHT NOW DE SELECT ALL OPTIONS> CLICK INSTALL........
5. SELECT PASSWORD HASH SYNC >  AZURE AD GLOBAL ADMIN CREDENTIAL --- eg- admin@CORPAD.ONMICROSOFT.COM
6. ON PREMISED AD - DOMAIN ADMIN CREDEITIALS - AZURE VM LOGIN CREDEINTIALS *
ADD DIRECTORY > CREATE NEW ACCOUNT> AZ103.TK\KUMAR (VM login name) - PASSWORD > ADD>
7. AZ-103 IS LAREADY VERIFIED - IT WILL SHOW U STATUS > CLICK NEXT 
8. SYNC SELECTED - DE SELECT ALL > SELECT EMPLOYYESS ( WE ALREADY CREATED OU AND EMPLOYEES ) >  NEXT
> NEXT - OPTIONAL FEATURE - YOU CAN SELECT PASSWORD WRITE BACK .
9. FINAL INSTALL > THIS WILL TAKE 2-3 MINUTES TO COMPLETED AND WAIT FOR ANOTHER 2 MINUTES TO SYNC .
10. PORTAL- AZURE AD - USERS---- MAKE SURE ALL ON PREMISES SHOULD BE VISIBLE UNDER CLOUD .

Now Login with the new user id in azure. It works.

   
***************************************************************************************************************************************************************   

10/08/2020
AZURE Route
1. System Routes: Default or after some config  
ex: subnet-subnet. onpremises-cloud (Site-site)
2. User Define Routes: Not default, admin configure for behavioural changes.

LAB FOR AZURE FIREWALL

1. CREATE ONE - NAME VNET- WITH ADDRESS SPACE -10.0.0.0/16 ALONG WITH MENTION BELOW SUBNETS
A. JUMPBOX SUBNET - 10.0.1.0/24 
B. PROD SUBNET 10.0.2.0/24 
C. AzureFirewallSubnet * THIS NAME IS CASE SENSITIVE SO PLEASE USE SAME NAME .
* JUMPBOX SUBNET- JUMPBOX SUBNET MEANS PUBLIC IP AND RDP IS ALLOWED TO ALL VM LIKE PUBLIC ACCESS.
**PROD SUBNET   - PROD SUBNET VMS HAVING NO PUBLIC IP ASSIGN AND RDP WILL BE POSSIBLE FROM FROM JUMPBOX SUBNET
AND THAT TOO VIA INTERNAL PRIVATE IP .
2. CREATE ONE VM INTO JUMPBOX SUBNET - NAME RDP ALONG WITH PUBLIC IP . THIS IS LIKE A DEFAULT VM .
RDP VM SHOULD GET ONE PUBLIC IP AND ONE PRIVATE IP .
3. CREATE ONE VM INTO PROD SUBNET - NAME - PROD - UNDER NETWORKING -DISBALE PUBLIC IP .
4. PORTAL> CREATE > FIREWALL > NAME -AZUREFIREWALL 
> REGION
> CHOOSE NETWORK- SELECT EXISTING> VNET ( IT WILL PICK AZUREFIREWALL SUBNET AUTOMATICALLY )
> PUBLIC IP > CLICK CREATE NEW- NAME - FIREWALL-PIP 
>REVIEW CREATE .
* ONCE FIREWALL IS READY> CLICK ON FIREWALL AND VALIDATE PRIVATE IP - 10.0.3.4
5. TRY TO CHECK DEFAULT BEHAVIOUR OF INTERNET IN AZURE VM 
TAKE RDP OF JUMPBOX VM - NAME-RDP VIA PUBLIC IP>
TRY TO TKE RDP OF PROD VM - VIA PRIVATE IP - 10.0.1.4 > FROM INSIDE JUMPBOX VM
AND FINALLY TRY TO ACCESS - IBM,FACEBOOK AND GOOGLE.COM .
BY DEFAULT EVERY THING IS ALLOWED .
6. PORTAL> CREATE- ROUTEtable - NAME - ROUTE1> REGION> CREATE.
7. RESOURCE GROUP > ROUTEtable> ROUTE1> routes
> ROUTE NAME= INTERNET
> ADDRESS PREFIX- 0.0.0.0/0 ( DEFAULT INTERNET )
>NEXT HOP TYPE> SELECT VIRTUAL APPLIANCE > IP - 10.0.2.4 (Firewall private IP) > OK
RouteTable> ROUTE1> SUBNETS> SELECT VNET> AND SELECT PROD SUBNET*
* THIS STEP ACTUALLY DEFINE USER DEFINE ROUTE TO A PARTICULAR SUBNET . MEANING IS WHEN EVER
ANY VM FROM THIS SUBNET TRY TO ACCESS ANY WEBSITE > ROUTE WILL GO TO FIREWALL FIRST .
8. PORTAL - FIREWALL > CONFIGURATIONS RULES > APPLICATION RULES
> UNDER TARGET FQDN 
> NAME GOOGLE.COM > 
> SOURCE ADDRESS> 10.0.1.0/24 
> PROTOCOL PORT- HTTP,HTTPS
> TARGET FQDN> WWW.GOOGLE.COM AND CLICK ADD .
IT MEANS ONLY GOOGLE.COM IS ALLOWED .
TRY TO ACCESS FACEBOOK.COM - IT SHOULD BE BLOCKED. 

AZURE TRAFFIC MANAGER
Geo Location

WEBAPP- + TRAFFIC MANAGER-  STEP BY STEP - RECENT

****** PLEASE DOWNLOAD VISUAL STUDIO BEFORE DOING THIS LAB.  VS IS USED TO DEPLOY APPLICATION ******

A. CREATE TWO WEB APPS - ( ONE IS IN EAST US AND SECOND ONE IS ON EAST ASIA )

1. CREATE ONE RESORUCE GROUP NAME - WEBAPP-US MAKE SURE THIS IS IN EAST US .
2. CREATE ONE RESORUCE GROUP NAME - WEBAPP-ASIA MAKE SURE THIS IS IN EAST ASIA.

1.PORTAL > CREATE > SEARCH > WEB > SELECT WEB APP > CREATE > SELECT USA RG
>NAME- KUMARUSA 
>CODE- ASP.NET 3.5
>REGION- EAST US
>WEB APP PLAN- NAME- NEW- WEBAPP-USA
> MAKE SURE - Standard S1
> CREATE .

2.PORTAL > CREATE > SEARCH > WEB > SELECT WEB APP > CREATE > SELECT USA RG
>NAME- KUMARASIA 
>CODE- ASP.NET 3.5
>REGION- EAST ASIA
>WEB APP PLAN- NAME- NEW- WEBAPP-ASIA
> MAKE SURE - Standard S1
> CREATE .

LAB NO 2 - DEPLOY BOTH THE WEB APPS
EXAMPLE- USA - HELLO AZURE .USA
EXAMPLE- ASIA- HELLO AZURE . ASIA

1. RG-USAWEBAPP-CLICK KUMARUSA ( APP SERVICE ) > GET PUBLICSH PROFILE . IT WILL DOWNLOAD DEPLOYMENT CREDENTIAL.
2. RG-ASIAWEBAPP-CLICK KUMARASIA ( APP SERVICE ) > GET PUBLICSH PROFILE . IT WILL DOWNLOAD DEPLOYMENT CREDENTIAL.
( THESE TWO STEPS ALLOW U TO GET TWO DEPLOYMENT CREDENTIAL. COPY THESE TWO CREDENTIAL WHERE YOU INTSALLED VISUAL STUDIO . IN THIS SCENERIO THIS IS ONE OF THE AZURE VM .)

LAB 3. CREATE WEB APP - USA
VISUAL STUDIO > FILE > NEW > PROJECT> WEB> CLICK DOWN ARROW > SELECT PREVIOUS VERIONS >
>SELECT ASP.NET EMPTY WEBSITE 
>OK AND WAIT FOR PROJECT CREATION 

>RIGHT CLICK ON WEBSITE 1 > ADD NEW ITEM >HTML PAGE> Name- Default.htm> ADD
*** Default.htm is case sensitive . Pls use same name ***WARNING .
>UNDER BODY TYPE- SOME SAMPLE WORDS----  HELLO AZURE . USA
>BUILT > PIBLIC WEBAPP> IMPORT > MAKE SURE YOU SELECT USA CREDENTIAL> OK > PUBLISH .
>DEFAULT IT WILL OPEN WEB PAGE  - HTTP://KUMARUSA.AZUREWEBSITES.NET ( PAGE WILL SHOW HELLO AZURE . USA)

LAB 4. CREATE WEB APP - ASIA
 VISUAL STUDIO > FILE > NEW > PROJECT> WEB> CLICK DOWN ARROW > PREVIOUS VERIONS >
>SELECT ASP.NET EMPTY WEBSITE 
>OK AND WAIT FOR PROJECT CREATION 
>RIGHT CLICK ON WEBSITE 1 > ADD NEW ITEM >HTML PAGE> Name- Default.htm> ADD
*** Default.htm is case sensitive . Pls use same name ***WARNING .
>UNDER BODY TYPE HELLO AZURE . ASIA
>BUILT > PIBLIC WEBAPP> IMPORT > MAKE SURE YOU SELECT ASIA CREDENTIAL> OK > PUBLISH .
>DEFAULT IT WILL OPEN WEB PAGE  - HTTP://KUMARASIA.AZUREWEBSITES.NET  ( PAGE WILL SHOW HELLO AZURE . ASIA )


LAB 5. CONFIGURE TRAFFIC MANAGER
PORTAL > SEARCH > TRAFFIC MANAGER > SELECT TRAFFIC MANAGER PROFILE > CORP2020 * ( NAME SHOULD BE AVAIBLAE GLOBALLY )
>REG - ANY
>PERFORMANCE
>CREATE

RG> CLICK GLOBAL2020 TRAFFIC MANAGER>  PLS VERIFY HEALTH POLICY UNDER CONFIGURATION - 30 SECONDS.
>ENDPOINTS > SELECT AZURE END POINTS
> ADD >NAME- USA> AZURE APP SERVICE> SELECT AZUREUSA WEB APP > OK
> ADD >NAME- ASIA> AZURE APP SERVICE> SELECT AZUREASIA WEB APP > OK
> WAIT FOR THREE MINUTES AND SEE BOTH THE STATUS ACTIVE .

LAB 6. TESTING
TRY TO ACCESS FROM AZURE VM ( USA ) HTTP://CORP2020.TRAFFICMANAGE.NET - PAGE SHOULD COME FROM USA WEB APP .
TRY TO ACCESS FROM LOCAL LAPTOP ( ASIA )> HTTP://CORP2020.TRAFFICMANAGE.NET> PAGE SHOULD COME FROM ASIA WEB APP .

7. CLICK ON TRAFFIC MANAGER> CONFIGURATION > CHANGE > ROUTING FROM PERFORMANCE TO PRIORITY > SAVE .
 CLICK ON END POINT AND VALIDATE - USA-1 AND ASIA-2 . ALL REQUEST SHOULD GO TO USA WEB APP AND WHEN USA WEB APP
IS DOWN THEN IT WILL GO TO ASIA .

6. TESTING
TRY TO ACCESS FROM AZURE VM ( USA ) HTTP://CORP2020.TRAFFICMANAGE.NET - PAGE SHOULD COME FROM USA WEB APP .
TRY TO ACCESS FROM LOCAL LAPTOP ( ASIA )> HTTP://CORP2020.TRAFFICMANAGE.NET> PAGE SHOULD COME FROM USA WEB APP .

https://logicit2019-my.sharepoint.com/_forms/default.aspx

*****************************************************************************************************************************

11/08/2020
AZURE STORAGE

Download Azure Storage Explorer for Accessing role based on Windows

1. Containers
   Page BLOB ---> Regular data like disk data
   Block BLOB ---> Backup, old files
   Append BLOB ---> Logs
   
2. Tables ---> Store structured data of APP
3. Queue  ---> Message queues
4. FILE   ---> Share files like one drive.

Azure STORAGE Permissions

1. RBAC-rolebased like a contributor
2. Storage Two accesskeys---> Primary key1. Secondary key2 ---> only to that specific account 
3. Specific Permission ---> shared access signature ---> only to that specific service like blob, file, queue, table

DATA PROTECTION

Backup two methods
MARS-microsoft service agent recovery service

BACKUP OF ON PREMISES SERVER INTO AZURE  BACKUP VAULT - ALL BACKUP GOES TO AZURE VAULT.

1. * IN THIS LAB - WE ARE USING AZURE VM AND TREAT AS A ON PREMISES SERVER.
2. AZURE VM > INSTALL CHROME AND LOGIN AZURE PORTAL.
( CLICK SERVER MANAGER> LOCAL SERVER > IE SECURITY DISABLED THEN OPEN IE > GOOGLE.COM> DOWNLOAD
CHROME )
3.PORTAL> CREATE > SEARCH BACKUP> BACKUP AND SITE RECOVERY > CREATE > EAST US .
BACKUP VAULT> SELECT BACKUP > ON PREMISES >SELECT FILE AND FOLDER AS EXAMPLE > PREPARE THE SERVER > DOWNLOAD OPTION 1 AND 2 == 1 IS AGENT & 2 IS CREDENTIAL.
4. INSTALL MARS AGENT AND PROCEED WITH REGISTARTION OF SERVER INTO VAULT
WITH THE HELP OF CREDENTIAL KEY AND FINISH THE WIZARD .
5. CREATE ONE FOLDER > EXAMPLE - IMPORTANT> CREATE COUPLE OF FILES .
6. DESKTOP > SHORT CUT FILE IS THERE > RUN AZURE BACKUP EXE > START BACKUP SCHEDULE
> FILES> SELECT IMPORTANT FOLDER AND FINISH THE WIZARD > THEN ONLY YOU WILL GET BACKUP NOW .
7. CLICK BACK UP NOW TO EXECUTE BACKUP > WAIT FOR BACKUP WIZARD TO COMPLETE
8. DELETE THE IMPORTANT FOLDER.
9. RECOVER DATA > SELECT C: > LATEST DATE > MOUNT > BROWSE - COPY AND PASTE INTO
C: DRIVE IMPORTANT FOLDER > AND THEN UNMOUNT.


CREARE AZURE POLICY TO ALLOW SPECIFIC VM SIZE SKU

1. PORTAL > GLOBAL SEARCH > POLICY > CLICK POLICY > DEFINATIONS> CLICK INITIATIVE DEFINATION
> RIGHT HAND POLICY SIDE- UNDER SEARCH > TYPE SKU > SELECT POLICY ALLOW VM SKU SIZE >ADD
      NAME                   - ALLOW VM SIZE 
      CATEGORY - NEW CATEGORY-ALLOW VM SIZE 
UNDER ALLOW SKU > SET VALUE - SELECT A0,A1,A2,A3 SAVE .
2. UNDER  DEFINATION > SELECT VM SIZE POLICY  > CLICK ASSIGN> MAKE SURE  UNDER SCOPE SELECT SUBSCRIPTION
> REVIEW AND CREATE
3. WAIT FOR 5-7 MINUTES .
4. RESULT > TRY TO CREATE ONE VM WITH DEFAULT SIZE D1 . RESULT IT SHOULD NOT ALLOW ME TO CREATE D1 VM SIZE .
* TARGET --- SUBSCRIPTION OR REGIONS OR RESOURCE GROUP 


************************************************************************************************************************************************************

12/08/2020
AZURE SQLDB  and AZURE MONITORING

1. PORTAL > CREATE > SEARCH LOG ANALYTICS> CREATE> LOG ANALYTICS NAME- AZURE MONITORING>
EXISTING RESOURCE GROUP > PERGB LICENCE > CREATE .
2. WORKSPACE> CLICK VM > SELECT EXISTING VM > RIGHT CLICK CONNECT .
CONNECT - MEANS HE IS INSTALLING MONITORING AGENT INTO AZURE VM AND WAIT FOR THE STATUS GREEN .
After TWO MINUTES- LOGIN INTO AZURE VM > CONTROL PANNEL > PROGRAMS AND FEATURES> VALIDATE THE AGENT NAME
MICROSOFT MONITORING AGENT- MMA .
3. WORKSPACE> AZURE ACTIVITY LOG > SELECT SUBSCRPTION > CLICK CONNECT AND WAIT FOR THE STATUS GREEN .
4. CREATE ALERTS-
CLICK ALERTS> NEW ALERT RULE > UNDER RESOURCE> SELECT > UNDER FILTER BY RESOURCE TYPE- SELECT VMS > SELECT ALL
VMS OR MINIMUM ONE VM > DONE
ADD CONDITION> SEARCH CPU > SELECT PERCENTAGE CPU > GREATER THEN 1% THRESH HOLD VALUE> AGRREGATE GRANULARITY PERIOD - 1 MINUTE>
ACTION GROUP > CREATE ACTION GROUP > ACTION GROUP NAME - EMAIL ALERT > SHORT NAME - EMAIL ALERT >
ACTION NAME- EMAIL ALERT > ACTION TYPE SELECT EMAIL > EDIT - EMAIL ID > OK 
ALERT DETAILS - CPU HIKE MORE THEN 1 PERCENTAGE> SEVERITY 3 > OK .
5. GO TO YOUR EMAIL ID > YOU WILL SEE FIRST AUTO GENRATED EMAIL -- EMAIL SUBJECT-
You’re now in the Email Alert action group .
6. LOGIN INTO AZURE VM > RIGHT CLICK TASK MANAGER> PERFROMANCE > SEE CPU PERCENTAGE . DEFINETLY THIS
WOULD BE MORE THEN 1% AS PER CPU HIKE ALERT. 
7. AFTER 4-5 MINUTES YOU WILL GET AUTO GENRATED CPU HIKE EMAIL ON YOUR REGISTERED EMAIL .
8. CLICK ACTIVITY LOGS > NEXT TO RESOURCE GROUP > SELECT EVENT CATEGORIES> NOW U SEE ALL ACTIVITY LOGS
OR ANY CHANGES DONE BY ANY ONE INSIDE THE SUBSCRIPTION.

powershell install and Azure
Chocolatey INSTALL
>> Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))

To use Azure PowerShell in PowerShell 5.1 on Windows:

Update to Windows PowerShell 5.1. If you're on Windows 10 version 1607 or higher, you already have PowerShell 5.1 installed.
Install .NET Framework 4.7.2 or later.
Make sure you have the latest version of PowerShellGet. Run Install-Module -Name PowerShellGet -Force.

>> Install-Module -Name PowerShellGet -Force
>> Install-Module -Name Az   -------> To install Az module (AzureRM previous name)
>> import-module az -Verbose -Force
>> Set-ExecutionPolicy Unrestricted
>> Get-Module
>> Connect-AzAccount

**********************************************************************************************************************************************************************

13/08/2020
MIGRATION OF ON-PREMISIS TO AZURE
Hyper-v Server to Azure

SCENERIOS
1. Hyper-v Server to Azure
2. VMware server to Azure
3. Physical Server to Azure

Phases of MIGRATION
1. Preparation
2. Assessment Report
3. Replicate
4. Test failover -RDP of migrated server
5. Delete test Failover
6. Cut-over -- Azure VM will be ready

Migration TOOLS
1. ASR- Azure site RECOVERY -- No Assessment
2. Azure Migrate  --- DO Assessment

OS TYPE: win 2016 r2
SIZE: E4-v3 disk
Create a role of Hyper-V and install
Create a folder in localdisk:C
Click on Hyper-v right click select Virtual Switch Manager > Select Internal and click ok
Click on Hyper-v right click select> New> Hard Disk> Browse Folder and select created folder > Select Size> click ok


HYPER-V SWITCHES
1. External --- communicate between hyper-v , physical server and On-premisis machines
2. INTERNAL --- communicate between hyper-v and physical server
3. Private --- Only between Hyperv



1 cd c:\
2 Get-FileHash -Path .\AzureMigrateAppliance_v3.20.05.27.zip -Algorithm SHA256
3 New-VMSwitch -SwitchName "NATSwitch" -SwitchType Internal
4 New-NetIPAddress –IPAddress 172.21.21.1 -PrefixLength 24 -InterfaceAlias "vEthernet (NATSwitch)"
5 New-NetNat –Name MyNATnetwork –InternalIPInterfaceAddressPrefix 172.21.21.0/24
6 clear

1. RUN ALL THESE 3 COMMAND UNDER AZURE.
2. AZURE VM > NCPA.CPL - DISABLE INTERNAL SWITCH - OLD ONE .
3. CHECK THE IP - NATSWITCH - 172.21.21.1 - LEAVE AS IT IS .
4. PROD VM > RIGHT CLICK SETTING > NETWORK> CHANGE THE SWITCH >NAT .
5. VIRTUAL APPLIANCE > NETWORK> CHANGE THE SWITCH >NAT .
6. PROD VM > ASSIGN  IP 172.21.21.11 - DNS 255.255.0.0 , G/W 172.21.21.1 , DNS 8.8.8.8
7. AAPPLIANCE > ASSIGN  IP 172.21.21.12- DNS 255.255.0.0 , G/W 172.21.21.1 , DNS 8.8.8.8

https://172.21.21.12:44368


********************************************************************************************************************************************

14/08/2020
MIGRATION OF ON-PREMISIS TO AZURE
Physical Server to Azure

1. CREATE RG AS PER YOUR REGION.
2. CREATE VNET AS PER YOUR ADDRESS RANGE .
3. CREATE SERVER 2016 OS AZURE VM - SIZE - Standard E4 v3 (4 vcpus, 32 GiB memory)
4. LOGJ INTO AZURE VM - DISBALE IE SECURITY  AND INSTALL CHROME .
5. DOWNLOAD SERVER 2012R2 ISO INSIDE AZURE VM - https://www.microsoft.com/en-in/evalcenter/evaluate-windows-server-2012-r2
6. SERVER MANAGER> ADD ROLES > NEXT NEXT SELECT NHYPER-V  - NO OTHER CHANGES > NEXT NEXT INSTALL HYPER V - REBOOT .
7. WAIT FOR 2 MINUTES AND TAKE RDP BACK > CHECK HYPER V CONSOLE .
8. RUN THREE COMMAND TO CREATE SWITCH UNDER AZURE VM POWERSHELL .
     New-VMSwitch -SwitchName "NATSwitch" -SwitchType Internal
     New-NetIPAddress –IPAddress 172.21.21.1 -PrefixLength 24 -InterfaceAlias "vEthernet (NATSwitch)"
     New-NetNat –Name MyNATnetwork –InternalIPInterfaceAddressPrefix 172.21.21.0/24
9.  CREATE TWO DIFFERENT FOLDERS UNDER AZURE VM C:\CONFIG AND C:\PRODVM
10. CREATE 15GB FIXED DISK -  HYPER V CONSOLE > NEW DISK > SELECT FIXED > VHD > 15GB > SAVE C:\PRODVM FOLDER. 
11 - DPWN;OAD WINDOWS SERVER 2016 ISO AS WELL INTO AZURE VM - HYPER V ... 
OVERALL TWO ISO - ONE 2012R2 AND ONE 2016 SERVER ISO  .
















 